# 高并发

# 高并发处理思路与手段

* 扩容

* 缓存


## 扩容

* 垂直扩容（纵向扩展）：提高系统部件能力
    * 增加内存

* 水平扩展（横向扩展）：增加更多系统成员来实现
    * 增加服务器
    

### 扩容 - 数据库

* 读操作扩展：memcache、redis、CDN等缓存

* 写操作扩展：Cassandra、Hbase等


# 高并发之缓存 - 特征、场景及组件介绍

## 缓存特征

* 命中率：命中数 / （命中数 + 没有命中数）

* 最大元素（空间）

* 清空策略：FIFO, LFU, LRU, 过期时间, 随机等


## 缓存命中率影响因素

* 业务场景和业务需求

* 缓存的设计（粒度和策略）

* 缓存容量和基础设施


## 缓存分类和应用场景

* 本地缓存：编程实现（成员变量、局部变量、静态变量）、Guava Cache

* 分布式缓存：Memcache、Redis


## 缓存 - Guava Cache


## 缓存 - Memcache


## 缓存 - Redis


## 高并发场景下缓存常见问题

* 缓存一致性

* 缓存并发问题

* 缓存穿透问题

* 缓存的雪崩现象


## 缓存一致性

* 更新数据库成功 -> 更新缓存失败 -> 数据不一致

* 更新缓存成功 -> 更新数据库失败 -> 数据不一致

* 更新数据库成功 -> 淘汰缓存失败 -> 数据不一致

* 淘汰缓存成功 -> 更新数据库失败 -> 查询缓存miss